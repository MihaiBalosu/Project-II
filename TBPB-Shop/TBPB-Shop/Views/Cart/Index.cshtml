@model TBPB_Shop.ViewModel.CartViewModel
@{
    ViewData["Title"] = "Index";
}

<h2>
    <strong>My Cart: </strong>
</h2>

@if (!Model.Products.Any())
{
    <h3>
        No items added to cart.
        <a href=""> Go to products </a>
    </h3>
}
else
{
    <p>
        <a asp-controller="Cart" asp-action="Clear" asp-route-id="@Model.CartId"> Clear cart </a>
    </p>

    <div class="d-flex">


        <div class="main-container" id="products">

            <p class="main-paragraph">
                Products sold and delivered by TBPB
            </p>

            @foreach (var item in Model.Products)
            {
                <div class="container-product element-to-remove">
                    <div class="d-flex bd-highlight mb-3">
                        <div class="mr-auto p-2 bd-highlight">
                            <div class="individual-product">
                                @item.Product.Name
                            </div>

                            <div class="d-flex">
                                <div class="product-availability">
                                    Availability:
                                </div>

                                <div class="product-availability-value">
                                    @if (item.Product.QuantityOnStoc < 10)
                                    {
                                        <div class="on-stoc-lower">
                                            @item.Product.QuantityOnStoc
                                        </div>
                                    }
                                    else
                                    {
                                        <p class="on-stoc-higher"> On stoc </p>
                                    }
                                </div>
                            </div>

                            <div class="d-flex">
                                <div class="warranty-included">
                                    Warranty included:
                                </div>

                                <div class="warranty-included-value">
                                    24 months
                                </div>
                            </div>

                            <div class="guarantee">
                                <div class="guarantee-plus">
                                    Protect your investment with the Guarantee Plus!
                                </div>

                                <div class="d-flex radio-warranties">
                                    <input type="radio" />

                                    <label class="warranty-1-year">
                                        Warranty Plus 1 YEAR:
                                    </label>

                                    &nbsp;

                                    <a href="" class="service-price">
                                        <span class="money-int"> 49 </span>
                                        <sup class="money-decimal"> 20 </sup>
                                        <span class="money-currency-warranty-1-year"> Lei </span>
                                    </a>

                                    <input type="radio" />

                                    <label class="warranty-2-years">
                                        Warranty Plus 2 YEARS:
                                    </label>

                                    &nbsp;

                                    <a href=" " class="service-price">
                                        <span class="money-int"> 89 </span>
                                        <sup class="money-decimal"> 99 </sup>
                                        <span class="money-currency"> Lei </span>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <span class="d-flex justify-content-center select-list-buc">
                            <select id="drop-down-list" class="custom-select" onchange="getSelectedValue()">
                                <option value="1" selected="selected"> 1 </option>
                                <option value="2"> 2 </option>
                                <option value="3"> 3 </option>
                                <option value="4"> 4 </option>
                                <option value="5"> 5 </option>
                                <option value="6"> 6 </option>
                                <option value="7"> 7 </option>
                                <option value="8"> 8 </option>
                                <option value="9"> 9 </option>
                            </select>
                            @*@Html.DropDownListFor(payment => payment.BankAccountId, new SelectList(Model.BanksAccount, "Id", "IBAN"), "", new { @class = "form-control" })*@
                        </span>
                           
                        <div class="p-2 bd-highlight">
                            <div class="cost-product-value">
                                <span class="money-int"> @Model.GetNaturalPart(@item.Product.Price * @item.Quantity) </span>
                                <sup class="money-decimal"> @Model.GetCommaPart(@item.Product.Price * @item.Quantity) </sup>
                                <span class="money-currency"> Lei </span>
                            </div>

                            <div class="move-to-favorites">
                                <a href=""> Move to Favorites </a>
                            </div>

                            <div class="delete-product-from-cart">
                                <a href="" data-product-id="@item.Product.Id" data-cart-id="@Model.CartId" class="js-delete"> Delete </a>
                            </div>
                        </div>
                    </div>
                </div>
            }

            <div class="d-flex justify-content-end">
                <div class="cost-details-label">
                    Products cost:
                </div>

                <div class="cost-details-value">
                    <span class="money-int"> @Model.GetNaturalPart(@Model.TotalPriceProducts) </span>
                    <sup class="money-decimal"> @Model.GetCommaPart(@Model.TotalPriceProducts) </sup>
                    <span class="money-currency"> Lei </span>
                </div>
            </div>

            <div class="d-flex justify-content-end">
                <div class="cost-details-label">
                    Delivery and processing cost:
                </div>

                <div class="cost-details-value">
                    <span class="money-int"> @Model.GetNaturalPart(@Model.PriceDelivery) </span>
                    <sup class="money-decimal"> @Model.GetCommaPart(@Model.PriceDelivery) </sup>
                    <span class="money-currency"> Lei </span>
                </div>
            </div>

            <div class="d-flex justify-content-end">
                <div class="total-cost-details-label">
                    Total cost:
                </div>

                <div class="cost-details-value">
                    <span class="money-int"> @Model.GetNaturalPart(@Model.TotalPrice) </span>
                    <sup class="money-decimal"> @Model.GetCommaPart(@Model.TotalPrice) </sup>
                    <span class="money-currency"> Lei </span>
                </div>
            </div>
        </div>

        <div class="container-total">
            <p class="add-order">
                Add Order
            </p>

            <div class="d-flex">
                <div class="p-2 final-cost-label">
                    Products cost:
                </div>

                <div class="p-2 ml-auto final-cost-value">
                    <span class="money-int"> @Model.GetNaturalPart(@Model.TotalPriceProducts)</span>
                    <sup class="money-decimal"> @Model.GetCommaPart(@Model.TotalPriceProducts) </sup>
                    <span class="money-currency"> Lei </span>
                </div>
            </div>

            <div class="d-flex">
                <div class="mr-auto p-2 delivery-process-label">
                    Delivery and
                    <p>
                        processing cost:
                    </p>
                </div>

                <div class="p-2 delivery-process-value">
                    <span class="money-int"> @Model.GetNaturalPart(@Model.PriceDelivery) </span>
                    <sup class="money-decimal"> @Model.GetCommaPart(@Model.PriceDelivery) </sup>
                    <span class="money-currency"> Lei </span>
                </div>
            </div>

            <div class="line-separator"></div>

            <div class="total-price-label">
                Total:
            </div>

            <div class="total-price-value">
                <span class="money-int"> @Model.GetNaturalPart(@Model.TotalPrice) </span>
                <sup class="money-decimal"> @Model.GetCommaPart(@Model.TotalPrice) </sup>
                <span class="money-currency"> Lei </span>
            </div>

            <a class="btn btn-primary continue-button" href=""> Continue </a>
        </div>

    </div>
}


@section scripts{
    <script>
        $(document).ready(function () {
            $("#products .js-delete").on("click", function () {
                var button = $(this);
                $.ajax({
                    url: "/Cart/Delete?cartId=" + button.attr("data-cart-id") + "&productId=" + button.attr("data-product-id"),
                    success: function () {
                        $("element-to-remove").remove();
                    }
                })
            });
        });
    </script>

    <script>
        function getSelectedValue() {
            var selectedValue = document.getElementById("drop-down-list").value;
            console.log(selectedValue);
        }
    </script>
}       